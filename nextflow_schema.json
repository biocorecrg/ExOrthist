{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/biocorecrg/exorthist/master/nextflow_schema.json",
  "title": "ExOrthist pipeline parameters",
  "description": "Schema for the parameters of your ExOrthist pipeline",
  "type": "object",
  "$defs": {
    "generic_options": {
      "title": "Generic Options",
      "type": "object",
      "description": "",
      "default": "",
      "properties": {
        "resume": {
          "type": "string",
          "description": "Convenient param for detecting resume mistake"
        },
        "wf": {
          "type": "string",
          "description": "Workflow to be run, by default the main one. Alternative is plot",
          "default": "main"
        }
      }
    },
    "input_output_options": {
      "title": "Input/Output Options",
      "type": "object",
      "required": [
        "annotations",
        "genomes",
        "cluster",
        "output"
      ],
      "properties": {
        "annotations": {
          "type": "string",
          "description": "Path to GTF annotation files",
          "format": "file-path",
          "default": "./test/GTF/*_annot-subsetted.gtf.gz"
        },
        "genomes": {
          "type": "string",
          "description": "Path to fasta genome files",
          "format": "file-path",
          "default": "./test/GENOMES/*_gDNA-subsetted.fasta.gz"
        },
        "cluster": {
          "type": "string",
          "description": "Path to cluster file (txt files)",
          "format": "file-path",
          "default": "./test/hg38_mm10_bosTau9.tab"
        },
        "output": {
          "type": "string",
          "description": "Output folder path",
          "format": "directory-path",
          "default": "./output_test"
        }
      }
    },
    "analysis_parameters": {
      "title": "Analysis Parameters",
      "type": "object",
      "required": [
        "evodists",
        "long_dist",
        "medium_dist",
        "short_dist"
      ],
      "properties": {
        "evodists": {
          "type": "string",
          "description": "Path to a file with pairwise evolutionary distances",
          "format": "file-path",
          "default": "./test/evodists.txt"
        },
        "long_dist": {
          "type": "string",
          "description": "Long distance parameters",
          "default": "2,0.10,0.40,0.15"
        },
        "medium_dist": {
          "type": "string",
          "description": "Medium distance parameters",
          "default": "2,0.30,0.60,0.20"
        },
        "short_dist": {
          "type": "string",
          "description": "Short distance parameters",
          "default": "2,0.50,0.60,0.25"
        },
        "prevaln": {
          "type": "string",
          "description": "Pre-computed alignments",
          "format": "directory-path"
        },
        "alignmentnum": {
          "type": "integer",
          "description": "Alignment number",
          "default": 1000
        },
        "orthogroupnum": {
          "type": "integer",
          "description": "Orthogroup number",
          "default": 500
        }
      }
    },
    "additional_data": {
      "title": "Additional Data",
      "type": "object",
      "properties": {
        "extraexons": {
          "type": "string",
          "description": "Extra exons (e.g. from VastDB)",
          "format": "file-path"
        },
        "bonafide_pairs": {
          "type": "string",
          "description": "Bona fide orthologous exon pairs",
          "format": "file-path"
        },
        "orthopairs": {
          "type": "string",
          "description": "Orthopairs",
          "format": "file-path"
        }
      }
    },
    "plot_parameters": {
      "title": "Plot parameters",
      "type": "object",
      "description": "Specific parameters for generating plots",
      "default": "",
      "properties": {
        "geneID": {
          "type": "string",
          "description": "Gene ID",
          "default": "ENSG00000159055"
        },
        "ordered_species": {
          "type": "string",
          "description": "List of ordered species, separated by commas",
          "default": "hg38,mm10,bosTau9"
        },
        "relevant_exs": {
          "type": "string",
          "description": "Relevant exons",
          "default": "chr21:32274830-32274896"
        },
        "isoformID": {
          "type": "string",
          "description": "Isoform ID",
          "default": "ENSP00000290130"
        },
        "sub_orthologs": {
          "type": "string",
          "description": "File with sub-orthologs information",
          "format": "file-path"
        },
        "output_plot": {
          "type": "string",
          "description": "Path where to store resulting plot",
          "format": "file-path",
          "default": "./output_plot"
        }
      }
    },
    "notification_options": {
      "title": "Notification Options",
      "type": "object",
      "properties": {
        "email": {
          "type": "string",
          "description": "Email for notification",
          "format": "email",
          "default": "yourmail@yourdomain.xyz"
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/$defs/generic_options"
    },
    {
      "$ref": "#/$defs/input_output_options"
    },
    {
      "$ref": "#/$defs/analysis_parameters"
    },
    {
      "$ref": "#/$defs/additional_data"
    },
    {
      "$ref": "#/$defs/plot_parameters"
    },
    {
      "$ref": "#/$defs/notification_options"
    }
  ]
}
